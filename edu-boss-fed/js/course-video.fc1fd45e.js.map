{"version":3,"sources":["webpack:///./src/services/course-section.js","webpack:///./src/views/course/video.vue?ae76","webpack:///./src/services/aliyun-upload.js","webpack:///src/views/course/video.vue","webpack:///./src/views/course/video.vue?801f","webpack:///./src/views/course/video.vue","webpack:///./src/services/course.js","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/core-js/internals/inherit-if-required.js","webpack:///./src/views/course/video.vue?ce05","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["getSectionAndLesson","courseId","request","method","url","params","getSectionById","sectionId","createOrUpdateSection","data","getLessonById","lessonId","createOrUpdateLesson","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","goBack","staticStyle","model","value","course","callback","$$v","$set","expression","lesson","ref","handleUpload","_v","uploadPercent","_s","_e","isTranscodeSuccess","staticRenderFns","aliyunImageUploadAddressAndAuth","aliyunVideoUploadAddressAndAuth","aliyunTranscode","aliyunTranscodePercent","name","props","type","Number","String","required","uploader","imageURL","videoId","isUploadSuccess","created","loadCourseInfo","loadLessonInfo","initUploader","methods","window","AliyunUpload","Vod","userId","region","partSize","parallel","retryCount","retryDuration","onUploadstarted","onUploadSucceed","onUploadFailed","onUploadProgress","uploadInfo","isImage","onUploadTokenExpired","onUploadEnd","addFile","imageFile","videoFile","startUpload","$router","push","component","getQueryCourses","changeState","saveOrUpdateCourse","uploadCourseImage","getCourseById","valueOf","module","exports","call","requireObjectCoercible","toString","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","replace","start","end","trim","isCallable","isObject","setPrototypeOf","dummy","Wrapper","NewTarget","NewTargetPrototype","constructor","prototype","DESCRIPTORS","global","isForced","redefine","hasOwn","inheritIfRequired","isSymbol","toPrimitive","fails","getOwnPropertyNames","f","getOwnPropertyDescriptor","defineProperty","thisNumberValue","NUMBER","NativeNumber","NumberPrototype","toNumeric","primValue","toNumber","argument","first","third","radix","maxCode","digits","length","index","code","it","TypeError","charCodeAt","NaN","slice","parseInt","key","NumberWrapper","n","arguments","Object","keys","split","j","FUNCTION_NAME_EXISTS","EXISTS","FunctionPrototype","Function","FunctionPrototypeToString","nameRE","NAME","configurable","get","match","error"],"mappings":"gHAAA,0LAGaA,EAAsB,SAAAC,GACjC,OAAOC,eAAQ,CACbC,OAAQ,MACRC,IAAK,2CACLC,OAAQ,CACNJ,eAMOK,EAAiB,SAAAC,GAC5B,OAAOL,eAAQ,CACbC,OAAQ,MACRC,IAAK,sCACLC,OAAQ,CACNE,gBAMOC,EAAwB,SAAAC,GACnC,OAAOP,eAAQ,CACbC,OAAQ,OACRC,IAAK,2CACLK,UAKSC,EAAgB,SAAAC,GAC3B,OAAOT,eAAQ,CACbC,OAAQ,MACRC,IAAK,8BACLC,OAAQ,CACNM,eAMOC,EAAuB,SAAAH,GAClC,OAAOP,eAAQ,CACbC,OAAQ,OACRC,IAAK,mCACLK,W,2CCjDJ,IAAII,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,iBAAiB,CAACG,MAAM,CAAC,QAAU,QAAQC,GAAG,CAAC,KAAOR,EAAIS,UAAUL,EAAG,MAAM,CAACM,YAAY,CAAC,MAAQ,MAAM,OAAS,WAAW,CAACN,EAAG,UAAU,CAACG,MAAM,CAAC,cAAc,UAAU,CAACH,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,SAAS,SAAW,IAAII,MAAM,CAACC,MAAOZ,EAAIa,OAAiB,WAAEC,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIa,OAAQ,aAAcE,IAAME,WAAW,wBAAwB,GAAGb,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,SAAS,SAAW,IAAII,MAAM,CAACC,MAAOZ,EAAIkB,OAAY,MAAEJ,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIkB,OAAQ,QAASH,IAAME,WAAW,mBAAmB,GAAGb,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,QAAQ,CAACe,IAAI,aAAaZ,MAAM,CAAC,KAAO,YAAYH,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,QAAQ,CAACe,IAAI,aAAaZ,MAAM,CAAC,KAAO,YAAYH,EAAG,eAAe,CAACA,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQR,EAAIoB,eAAe,CAACpB,EAAIqB,GAAG,WAAW,GAAGjB,EAAG,eAAe,CAAwB,IAAtBJ,EAAIsB,cAAqBlB,EAAG,IAAI,CAACJ,EAAIqB,GAAG,SAASrB,EAAIuB,GAAGvB,EAAIsB,eAAe,OAAOtB,EAAIwB,KAAMxB,EAAmB,gBAAEI,EAAG,IAAI,CAACJ,EAAIqB,GAAG,SAASrB,EAAIuB,GAAGvB,EAAIyB,mBAAqB,OAAS,aAAazB,EAAIwB,QAAQ,IAAI,IAAI,IACzxCE,EAAkB,G,gFCETC,EAAkC,WAC7C,OAAOvC,eAAQ,CACbC,OAAQ,MACRC,IAAK,6DAKIsC,EAAkC,SAAArC,GAC7C,OAAOH,eAAQ,CACbC,OAAQ,MACRC,IAAK,2DACLC,YAKSsC,EAAkB,SAAAlC,GAC7B,OAAOP,eAAQ,CACbC,OAAQ,OACRC,IAAK,2CACLK,UAKSmC,EAAyB,SAAAjC,GACpC,OAAOT,eAAQ,CACbC,OAAQ,MACRC,IAAK,kDACLC,OAAQ,CACNM,eC4BN,GACEkC,KAAM,cACNC,MAAO,CACL7C,SAAU,CACR8C,KAAM,CAACC,OAAQC,QACfC,UAAU,GAEZvC,SAAU,CACRoC,KAAM,CAACC,OAAQC,UAGnBxC,KAXF,WAYI,MAAO,CACLkB,OAAQ,GACRK,OAAQ,GACRmB,SAAU,KACVC,SAAU,GACVC,QAAS,GACTjB,cAAe,EACfkB,iBAAiB,EACjBf,oBAAoB,IAGxBgB,QAvBF,WAwBIxC,KAAKyC,iBACLzC,KAAK0C,iBACL1C,KAAK2C,gBAEPC,QAAS,CACP,eADJ,WACA,gLACA,2BADA,gBACA,EADA,EACA,KACA,oBACA,iBAHA,8CAMI,eAPJ,WAOA,gLACA,2BADA,gBACA,EADA,EACA,KACA,oBACA,iBAHA,8CAMID,aAbJ,WAaA,WACM3C,KAAKoC,SAAW,IAAIS,OAAOC,aAAaC,IAAI,CAC1CC,OAAQ,mBACRC,OAAQ,GACRC,SAAU,QACVC,SAAU,EACVC,WAAY,EACZC,cAAe,EACfC,gBAAiB,WAAzB,8JACA,QAEA,UAHA,gCAKA,IALA,gBAKA,EALA,EAKA,KACA,oBACA,SACA,uBARA,wCAYA,GACA,qBACA,sBAdA,iBAYA,EAZA,EAYA,KAIA,oBACA,SACA,0BAlBA,QAsBA,mCACA,EACA,aACA,gBACA,sBA1BA,kGAAyB,GA8BjBC,gBAAiB,SAAzB,KAEQC,eAAgB,SAAxB,SAEQC,iBAAkB,SAA1B,OACeC,EAAWC,UACd,EAAZ,kCAGQC,qBAAsB,SAA9B,KAEQC,YAAa,WAArB,8JACA,qBADA,SAGA,GACA,oBACA,yBACA,iBACA,+CAPA,gBAGA,EAHA,EAGA,KAMA,oBAEA,4KACA,cADA,gBACA,EADA,EACA,KACA,mBACA,eACA,wBACA,6BACA,kBANA,2CASA,MApBA,iGAAqB,MAyBjB1C,aAvFJ,WAwFM,IAAN,oCACA,oCACA,gBACMiB,EAAS0B,QAAQC,GACjB3B,EAAS0B,QAAQE,GACjB5B,EAAS6B,eAEXzD,OA/FJ,WAgGMR,KAAKkE,QAAQC,KAAK,CAChBrC,KAAM,kBACNxC,OAAQ,CACNJ,SAAUc,KAAKd,eC7LqU,I,wBCQ1VkF,EAAY,eACd,EACAtE,EACA2B,GACA,EACA,KACA,WACA,MAIa,aAAA2C,E,2CCnBf,0LAGaC,EAAkB,SAAA3E,GAC7B,OAAOP,eAAQ,CACbC,OAAQ,OACRC,IAAK,+BACLK,UAKS4E,EAAc,SAAAhF,GACzB,OAAOH,eAAQ,CACbC,OAAQ,MACRC,IAAK,2BACLC,YAKSiF,EAAqB,SAAA7E,GAChC,OAAOP,eAAQ,CACbC,OAAQ,OACRC,IAAK,kCACLK,UAKS8E,EAAoB,SAAC9E,EAAM+D,GACtC,OAAOtE,eAAQ,CACbC,OAAQ,OACRC,IAAK,sBACLK,OACA+D,sBAKSgB,EAAgB,SAAAvF,GAC3B,OAAOC,eAAQ,CACbC,OAAQ,MACRC,IAAK,6BACLC,OAAQ,CACNJ,gB,qBC7CN,IAAIwF,EAAU,GAAIA,QAIlBC,EAAOC,QAAU,SAAUjE,GACzB,OAAO+D,EAAQG,KAAKlE,K,mBCJtBgE,EAAOC,QAAU,iD,uBCDjB,IAAIE,EAAyB,EAAQ,QACjCC,EAAW,EAAQ,QACnBC,EAAc,EAAQ,QAEtBC,EAAa,IAAMD,EAAc,IACjCE,EAAQC,OAAO,IAAMF,EAAaA,EAAa,KAC/CG,EAAQD,OAAOF,EAAaA,EAAa,MAGzCI,EAAe,SAAUC,GAC3B,OAAO,SAAUC,GACf,IAAIC,EAAST,EAASD,EAAuBS,IAG7C,OAFW,EAAPD,IAAUE,EAASA,EAAOC,QAAQP,EAAO,KAClC,EAAPI,IAAUE,EAASA,EAAOC,QAAQL,EAAO,KACtCI,IAIXb,EAAOC,QAAU,CAGfc,MAAOL,EAAa,GAGpBM,IAAKN,EAAa,GAGlBO,KAAMP,EAAa,K,qBC3BrB,IAAIQ,EAAa,EAAQ,QACrBC,EAAW,EAAQ,QACnBC,EAAiB,EAAQ,QAG7BpB,EAAOC,QAAU,SAAUW,EAAOS,EAAOC,GACvC,IAAIC,EAAWC,EAUf,OAPEJ,GAEAF,EAAWK,EAAYF,EAAMI,cAC7BF,IAAcD,GACdH,EAASK,EAAqBD,EAAUG,YACxCF,IAAuBF,EAAQI,WAC/BN,EAAeR,EAAOY,GACjBZ,I,kCChBT,W,kCCCA,IAAIe,EAAc,EAAQ,QACtBC,EAAS,EAAQ,QACjBC,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAS,EAAQ,QACjBC,EAAoB,EAAQ,QAC5BC,EAAW,EAAQ,QACnBC,EAAc,EAAQ,QACtBC,EAAQ,EAAQ,QAChBC,EAAsB,EAAQ,QAA8CC,EAC5EC,EAA2B,EAAQ,QAAmDD,EACtFE,EAAiB,EAAQ,QAAuCF,EAChEG,EAAkB,EAAQ,QAC1BvB,EAAO,EAAQ,QAA4BA,KAE3CwB,EAAS,SACTC,EAAed,EAAOa,GACtBE,EAAkBD,EAAahB,UAI/BkB,EAAY,SAAU5G,GACxB,IAAI6G,EAAYX,EAAYlG,EAAO,UACnC,MAA4B,kBAAd6G,EAAyBA,EAAYC,EAASD,IAK1DC,EAAW,SAAUC,GACvB,IACIC,EAAOC,EAAOC,EAAOC,EAASC,EAAQC,EAAQC,EAAOC,EADrDC,EAAKtB,EAAYa,EAAU,UAE/B,GAAId,EAASuB,GAAK,MAAMC,UAAU,6CAClC,GAAiB,iBAAND,GAAkBA,EAAGH,OAAS,EAGvC,GAFAG,EAAKvC,EAAKuC,GACVR,EAAQQ,EAAGE,WAAW,GACR,KAAVV,GAA0B,KAAVA,GAElB,GADAC,EAAQO,EAAGE,WAAW,GACR,KAAVT,GAA0B,MAAVA,EAAe,OAAOU,SACrC,GAAc,KAAVX,EAAc,CACvB,OAAQQ,EAAGE,WAAW,IACpB,KAAK,GAAI,KAAK,GAAIR,EAAQ,EAAGC,EAAU,GAAI,MAC3C,KAAK,GAAI,KAAK,IAAKD,EAAQ,EAAGC,EAAU,GAAI,MAC5C,QAAS,OAAQK,EAInB,IAFAJ,EAASI,EAAGI,MAAM,GAClBP,EAASD,EAAOC,OACXC,EAAQ,EAAGA,EAAQD,EAAQC,IAI9B,GAHAC,EAAOH,EAAOM,WAAWJ,GAGrBC,EAAO,IAAMA,EAAOJ,EAAS,OAAOQ,IACxC,OAAOE,SAAST,EAAQF,GAE5B,OAAQM,GAKZ,GAAI3B,EAASY,GAASC,EAAa,UAAYA,EAAa,QAAUA,EAAa,SAAU,CAQ3F,IAPA,IAcqBoB,EAdjBC,EAAgB,SAAgB/H,GAClC,IAAIgI,EAAIC,UAAUZ,OAAS,EAAI,EAAIX,EAAaE,EAAU5G,IACtDqF,EAAQhG,KAEZ,OAAOgG,aAAiB0C,GAAiB5B,GAAM,WAAcK,EAAgBnB,MACzEW,EAAkBkC,OAAOF,GAAI3C,EAAO0C,GAAiBC,GAElDG,EAAOxC,EAAcS,EAAoBM,GAAgB,oLAOhE0B,MAAM,KAAMC,EAAI,EAAQF,EAAKd,OAASgB,EAAGA,IACrCtC,EAAOW,EAAcoB,EAAMK,EAAKE,MAAQtC,EAAOgC,EAAeD,IAChEvB,EAAewB,EAAeD,EAAKxB,EAAyBI,EAAcoB,IAG9EC,EAAcrC,UAAYiB,EAC1BA,EAAgBlB,YAAcsC,EAC9BjC,EAASF,EAAQa,EAAQsB,K,qBCjF3B,IAAIpC,EAAc,EAAQ,QACtB2C,EAAuB,EAAQ,QAA8BC,OAC7DhC,EAAiB,EAAQ,QAAuCF,EAEhEmC,EAAoBC,SAAS/C,UAC7BgD,EAA4BF,EAAkBpE,SAC9CuE,EAAS,wBACTC,EAAO,OAIPjD,IAAgB2C,GAClB/B,EAAeiC,EAAmBI,EAAM,CACtCC,cAAc,EACdC,IAAK,WACH,IACE,OAAOJ,EAA0BxE,KAAK7E,MAAM0J,MAAMJ,GAAQ,GAC1D,MAAOK,GACP,MAAO,Q","file":"js/course-video.fc1fd45e.js","sourcesContent":["import request from '@/utils/request'\n\n// 获取课程的章节内容和课时信息\nexport const getSectionAndLesson = courseId => {\n  return request({\n    method: 'get',\n    url: '/boss/course/section/getSectionAndLesson',\n    params: {\n      courseId\n    }\n  })\n}\n\n// 获取章节信息\nexport const getSectionById = sectionId => {\n  return request({\n    method: 'get',\n    url: '/boss/course/section/getBySectionId',\n    params: {\n      sectionId\n    }\n  })\n}\n\n// 保存或更新章节内容\nexport const createOrUpdateSection = data => {\n  return request({\n    method: 'post',\n    url: '/boss/course/section/saveOrUpdateSection',\n    data\n  })\n}\n\n// 根据ID获取课时信息\nexport const getLessonById = lessonId => {\n  return request({\n    method: 'get',\n    url: '/boss/course/lesson/getById',\n    params: {\n      lessonId\n    }\n  })\n}\n\n// 保存或更新课时内容\nexport const createOrUpdateLesson = data => {\n  return request({\n    method: 'post',\n    url: '/boss/course/lesson/saveOrUpdate',\n    data\n  })\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"course-video\"},[_c('el-page-header',{attrs:{\"content\":\"上传视频\"},on:{\"back\":_vm.goBack}}),_c('div',{staticStyle:{\"width\":\"50%\",\"margin\":\"0 auto\"}},[_c('el-form',{attrs:{\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"课程\"}},[_c('el-input',{attrs:{\"size\":\"medium\",\"disabled\":\"\"},model:{value:(_vm.course.courseName),callback:function ($$v) {_vm.$set(_vm.course, \"courseName\", $$v)},expression:\"course.courseName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"课时\"}},[_c('el-input',{attrs:{\"size\":\"medium\",\"disabled\":\"\"},model:{value:(_vm.lesson.theme),callback:function ($$v) {_vm.$set(_vm.lesson, \"theme\", $$v)},expression:\"lesson.theme\"}})],1),_c('el-form-item',{attrs:{\"label\":\"视频上传\"}},[_c('input',{ref:\"video-file\",attrs:{\"type\":\"file\"}})]),_c('el-form-item',{attrs:{\"label\":\"封面上传\"}},[_c('input',{ref:\"image-file\",attrs:{\"type\":\"file\"}})]),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleUpload}},[_vm._v(\"开始上传\")])],1),_c('el-form-item',[(_vm.uploadPercent !== 0)?_c('p',[_vm._v(\"视频上传中：\"+_vm._s(_vm.uploadPercent)+\"%\")]):_vm._e(),(_vm.isUploadSuccess)?_c('p',[_vm._v(\"视频转码中 \"+_vm._s(_vm.isTranscodeSuccess ? '转码完成' : '转码中...'))]):_vm._e()])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\n\n// 获取阿里云图片上传凭证\nexport const aliyunImageUploadAddressAndAuth = () => {\n  return request({\n    method: 'get',\n    url: '/boss/course/upload/aliyunImagUploadAddressAdnAuth.json'\n  })\n}\n\n// 获取阿里云视频上传凭证\nexport const aliyunVideoUploadAddressAndAuth = params => {\n  return request({\n    method: 'get',\n    url: '/boss/course/upload/aliyunVideoUploadAddressAdnAuth.json',\n    params\n  })\n}\n\n// 阿里云转码请求\nexport const aliyunTranscode = data => {\n  return request({\n    method: 'post',\n    url: '/boss/course/upload/aliyunTransCode.json',\n    data\n  })\n}\n\n// 阿里云转码进度\nexport const aliyunTranscodePercent = lessonId => {\n  return request({\n    method: 'get',\n    url: '/boss/course/upload/aliyunTransCodePercent.json',\n    params: {\n      lessonId\n    }\n  })\n}\n","<template>\n  <div class=\"course-video\">\n    <el-page-header\n      content=\"上传视频\"\n      @back=\"goBack\"></el-page-header>\n    <div style=\"width:50%; margin: 0 auto;\">\n      <el-form\n        label-width=\"120px\">\n        <el-form-item\n          label=\"课程\">\n          <el-input\n            v-model=\"course.courseName\"\n            size=\"medium\"\n            disabled ></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"课时\">\n          <el-input\n            v-model=\"lesson.theme\"\n            size=\"medium\"\n            disabled ></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"视频上传\">\n          <input\n            type=\"file\"\n            ref=\"video-file\" >\n        </el-form-item>\n        <el-form-item\n          label=\"封面上传\">\n          <input\n            type=\"file\"\n            ref=\"image-file\" >\n        </el-form-item>\n        <el-form-item>\n          <el-button\n            type=\"primary\"\n            @click=\"handleUpload\">开始上传</el-button>\n        </el-form-item>\n        <el-form-item>\n          <p v-if=\"uploadPercent !== 0\">视频上传中：{{ uploadPercent }}%</p>\n          <p v-if=\"isUploadSuccess\">视频转码中 {{ isTranscodeSuccess ? '转码完成' : '转码中...' }}</p>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  getCourseById\n} from '@/services/course'\nimport {\n  getLessonById\n} from '@/services/course-section'\nimport {\n  aliyunImageUploadAddressAndAuth,\n  aliyunVideoUploadAddressAndAuth,\n  aliyunTranscode,\n  aliyunTranscodePercent\n} from '@/services/aliyun-upload'\n\nexport default {\n  name: 'CourseVideo',\n  props: {\n    courseId: {\n      type: [Number, String],\n      required: true\n    },\n    lessonId: {\n      type: [Number, String]\n    }\n  },\n  data () {\n    return {\n      course: {},\n      lesson: {},\n      uploader: null,\n      imageURL: '',\n      videoId: '',\n      uploadPercent: 0,\n      isUploadSuccess: false,\n      isTranscodeSuccess: false\n    }\n  },\n  created () {\n    this.loadCourseInfo()\n    this.loadLessonInfo()\n    this.initUploader()\n  },\n  methods: {\n    async loadCourseInfo () {\n      const { data } = await getCourseById(this.courseId)\n      if (data.code === '000000') {\n        this.course = data.data\n      }\n    },\n    async loadLessonInfo () {\n      const { data } = await getLessonById(this.lessonId)\n      if (data.code === '000000') {\n        this.lesson = data.data\n      }\n    },\n    initUploader () {\n      this.uploader = new window.AliyunUpload.Vod({\n        userId: '1618139964448548',\n        region: '',\n        partSize: 1048576,\n        parallel: 5,\n        retryCount: 3,\n        retryDuration: 2,\n        onUploadstarted: async uploadInfo => {\n          let uploadAddressAndAuth = null\n          // 检测是图片或视频\n          if (uploadInfo.isImage) {\n            // 图片处理\n            const { data } = await aliyunImageUploadAddressAndAuth()\n            if (data.code === '000000') {\n              uploadAddressAndAuth = data.data\n              this.imageURL = uploadAddressAndAuth.imageURL\n            }\n          } else {\n            // 视频处理\n            const { data } = await aliyunVideoUploadAddressAndAuth({\n              fileName: uploadInfo.file.name,\n              imageUrl: this.imageURL\n            })\n            if (data.code === '000000') {\n              uploadAddressAndAuth = data.data\n              this.videoId = data.data.videoId\n            }\n          }\n          // 设置凭证与地址\n          this.uploader.setUploadAuthAndAddress(\n            uploadInfo,\n            uploadAddressAndAuth.uploadAuth,\n            uploadAddressAndAuth.uploadAddress,\n            uploadAddressAndAuth.imageId || uploadAddressAndAuth.videoId\n          )\n          // 此步设置完毕，上传进度开始执行\n        },\n        onUploadSucceed: function (uploadInfo) {\n        },\n        onUploadFailed: function (uploadInfo, code, message) {\n        },\n        onUploadProgress: (uploadInfo, totalSize, loadedPercent) => {\n          if (!uploadInfo.isImage) {\n            this.uploadPercent = Math.floor(loadedPercent * 100)\n          }\n        },\n        onUploadTokenExpired: function (uploadInfo) {\n        },\n        onUploadEnd: async uploadInfo => {\n          this.isUploadSuccess = true\n          // 发送视频转码请求\n          const { data } = await aliyunTranscode({\n            lessonId: this.lessonId,\n            coverImageUrl: this.imageURL,\n            fileId: this.videoId,\n            fileName: this.$refs['video-file'].files[0].name\n          })\n          if (data.code === '000000') {\n            // 轮询转码进度\n            const timer = setInterval(async () => {\n              const { data } = await aliyunTranscodePercent(this.lessonId)\n              if (data.code === '000000') {\n                if (data.data === 100) {\n                  this.isTranscodeSuccess = true\n                  this.$message.success('视频转码成功')\n                  clearInterval(timer)\n                }\n              }\n            }, 1000)\n          }\n        }\n      })\n    },\n    handleUpload () {\n      const videoFile = this.$refs['video-file'].files[0]\n      const imageFile = this.$refs['image-file'].files[0]\n      const uploader = this.uploader\n      uploader.addFile(imageFile)\n      uploader.addFile(videoFile)\n      uploader.startUpload()\n    },\n    goBack () {\n      this.$router.push({\n        name: 'course-sections',\n        params: {\n          courseId: this.courseId\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.course-video {\n  .el-page-header {\n    margin-bottom: 20px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./video.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./video.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./video.vue?vue&type=template&id=73b25482&scoped=true&\"\nimport script from \"./video.vue?vue&type=script&lang=js&\"\nexport * from \"./video.vue?vue&type=script&lang=js&\"\nimport style0 from \"./video.vue?vue&type=style&index=0&id=73b25482&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73b25482\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\n\n// 分页查询课程信息\nexport const getQueryCourses = data => {\n  return request({\n    method: 'post',\n    url: '/boss/course/getQueryCourses',\n    data\n  })\n}\n\n// 课程上下架\nexport const changeState = params => {\n  return request({\n    method: 'get',\n    url: '/boss/course/changeState',\n    params\n  })\n}\n\n// 保存或更新课程信息\nexport const saveOrUpdateCourse = data => {\n  return request({\n    method: 'post',\n    url: '/boss/course/saveOrUpdateCourse',\n    data\n  })\n}\n\n// 上传图片\nexport const uploadCourseImage = (data, onUploadProgress) => {\n  return request({\n    method: 'post',\n    url: '/boss/course/upload',\n    data,\n    onUploadProgress\n  })\n}\n\n// 通过课程Id获取课程信息\nexport const getCourseById = courseId => {\n  return request({\n    method: 'get',\n    url: '/boss/course/getCourseById',\n    params: {\n      courseId\n    }\n  })\n}\n","var valueOf = 1.0.valueOf;\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = function (value) {\n  return valueOf.call(value);\n};\n","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./video.vue?vue&type=style&index=0&id=73b25482&lang=scss&scoped=true&\"","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar hasOwn = require('../internals/has-own-property');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar isSymbol = require('../internals/is-symbol');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar thisNumberValue = require('../internals/this-number-value');\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// `ToNumeric` abstract operation\n// https://tc39.es/ecma262/#sec-tonumeric\nvar toNumeric = function (value) {\n  var primValue = toPrimitive(value, 'number');\n  return typeof primValue === 'bigint' ? primValue : toNumber(primValue);\n};\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, 'number');\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (isSymbol(it)) throw TypeError('Cannot convert a Symbol value to a number');\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var n = arguments.length < 1 ? 0 : NativeNumber(toNumeric(value));\n    var dummy = this;\n    // check on 1..constructor(foo) case\n    return dummy instanceof NumberWrapper && fails(function () { thisNumberValue(dummy); })\n      ? inheritIfRequired(Object(n), dummy, NumberWrapper) : n;\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (hasOwn(NativeNumber, key = keys[j]) && !hasOwn(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}