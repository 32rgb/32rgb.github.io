import{_ as a}from"./LayoutFooter.8e5d3438.js";import{M as t,O as e,U as c,Q as s,X as o,r as l,o as d,a4 as r,a0 as n,$ as i,ac as u,_ as m,a2 as p,ad as v,a6 as k,a5 as h,c as f,Y as g,ae as b,a1 as _}from"./vendor.e5c0db2e.js";import{g as x}from"./index.ff69f4d4.js";t("data-v-54ca81fb");const I={class:"cart-item"},V=["src"],y={class:"info"},C=["textContent"],j={class:"detail"},D={class:"price"},U=m("p",{class:"del"},[m("span",null,"删除")],-1);e();const w={props:{itemData:{type:Object,required:!0}},setup(a){const{itemData:t}=a,e=c(),k=s(),h=o({get:()=>t.checked,set:a=>{k.commit("cart/checkedChange",{checked:a,id:t.id})}}),f=o({get:()=>t.count,set(a){k.dispatch("cart/countChange",{count:a,id:t.id})}}),g=()=>{e.push({name:"product",params:{productId:t.productId}})};return(a,e)=>{const c=l("van-checkbox"),s=l("van-stepper");return d(),r("div",I,[n(c,{modelValue:i(h),"onUpdate:modelValue":e[0]||(e[0]=a=>u(h)?h.value=a:null),"checked-color":"#ee0a24"},null,8,["modelValue"]),m("div",{class:"link",onClick:g},[m("img",{src:t.image,alt:""},null,8,V),m("div",y,[m("p",{class:"title",textContent:p(t.title)},null,8,C),m("p",j,[m("span",D,"￥"+p(t.price),1),n(s,{modelValue:i(f),"onUpdate:modelValue":e[1]||(e[1]=a=>u(f)?f.value=a:null),max:t.stock,"button-size":"26px",onClick:e[2]||(e[2]=v((()=>{}),["stop"]))},null,8,["modelValue","max"])]),U])])])}},__scopeId:"data-v-54ca81fb"};t("data-v-b952d7d8");const S={key:0,class:"cart-list"},A=_("全选");e();const L={setup(t){const e=s(),m=o((()=>e.state.cart.cartList)),p=o((()=>0!==m.value.length));(async()=>{const{data:a}=await x();200===a.status&&(e.commit("cart/clear"),await b(),a.data.valid.forEach((a=>{e.commit("cart/addToCart",{id:a.id,checked:!0,count:a.cart_num,image:a.productInfo.image,title:a.productInfo.store_name,price:a.truePrice,stock:a.trueStock,productId:a.product_id})})))})();const v=o({get:()=>e.getters["cart/checkedAll"],set(a){e.commit("cart/changeAll",{checked:a})}}),_=c(),I=()=>{_.push({name:"order-confirm",params:{cartId:e.getters["cart/checkedItems"].map((a=>a.id)).toString()}})};return(t,c)=>{const s=l("van-nav-bar"),o=l("van-empty"),b=l("van-checkbox"),_=l("van-submit-bar");return d(),r(k,null,[n(s,{title:"购物车","left-arrow":""}),i(p)?(d(),r("div",S,[(d(!0),r(k,null,h(i(m),(a=>(d(),f(w,{key:a.id,itemData:a},null,8,["itemData"])))),128))])):(d(),f(o,{key:1,description:"购物车还没有商品哦~"})),n(_,{price:100*i(e).getters["cart/totalPrice"],"button-text":"去结算",onSubmit:I},{default:g((()=>[n(b,{modelValue:i(v),"onUpdate:modelValue":c[0]||(c[0]=a=>u(v)?v.value=a:null),"checked-color":"#ee0a24"},{default:g((()=>[A])),_:1},8,["modelValue"])])),_:1},8,["price"]),n(a)],64)}},__scopeId:"data-v-b952d7d8"};export{L as default};
